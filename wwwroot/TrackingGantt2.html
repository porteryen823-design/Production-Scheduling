<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>多部門甘特圖 (含階段標示)</title>
  <link rel="stylesheet" href="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css">
  <script src="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js"></script>
  <style>
    html, body { height:100%; margin:0; padding:0; }
    #gantt_here { width:100%; height:100%; }
    /* 部門顏色 */
    .gantt_task_line.research { background-color: #8ecae6; }
    .gantt_task_line.design { background-color: #ffb703; }
    .gantt_task_line.product { background-color: #fb8500; }
    .gantt_task_line.engineering { background-color: #219ebc; }
    .gantt_task_line.marketing { background-color: #ff006e; }
    /* 階段標示樣式 */
    .phase_marker {
      background-color: #ffd166;
      color: #000;
      font-weight: bold;
      padding: 2px 6px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div id="gantt_here"></div>
  <script>
    // 自訂部門顏色
    gantt.templates.task_class = function(start, end, task){
      return task.department ? task.department.toLowerCase() : "";
    };

    gantt.init("gantt_here");

    // 任務資料
    var tasks = {
      data: [
        // Research
        {id:1, text:"User interviews", start_date:"2026-03-20", duration:7, department:"Research"},
        {id:2, text:"Meeting the personas", start_date:"2026-03-27", duration:14, department:"Research"},
        {id:3, text:"General research", start_date:"2026-04-10", duration:7, department:"Research"},
        {id:4, text:"User feedback collection", start_date:"2026-04-17", duration:7, department:"Research"},

        // Design
        {id:5, text:"Benchmarking research", start_date:"2026-03-20", duration:7, department:"Design"},
        {id:6, text:"Team brainstorm", start_date:"2026-03-27", duration:7, department:"Design"},
        {id:7, text:"Wireframes", start_date:"2026-04-03", duration:7, department:"Design"},
        {id:8, text:"User feedback collection", start_date:"2026-04-17", duration:7, department:"Design"},

        // Product
        {id:9, text:"Specifying the process", start_date:"2026-03-20", duration:7, department:"Product"},
        {id:10, text:"Wireframes", start_date:"2026-03-27", duration:7, department:"Product"},
        {id:11, text:"Product backlog", start_date:"2026-04-03", duration:7, department:"Product"},
        {id:12, text:"Launch planning", start_date:"2026-04-10", duration:7, department:"Product"},
        {id:13, text:"Launch checklist", start_date:"2026-04-17", duration:7, department:"Product"},

        // Engineering
        {id:14, text:"Prototype testing & updates", start_date:"2026-04-03", duration:7, department:"Engineering"},
        {id:15, text:"Sprint #1", start_date:"2026-04-10", duration:7, department:"Engineering"},
        {id:16, text:"Sprint #2", start_date:"2026-04-17", duration:7, department:"Engineering"},
        {id:17, text:"Build final version", start_date:"2026-04-24", duration:6, department:"Engineering"},

        // Marketing
        {id:18, text:"Launch planning", start_date:"2026-04-10", duration:7, department:"Marketing"},
        {id:19, text:"Launch checklist", start_date:"2026-04-17", duration:7, department:"Marketing"}
      ]
    };

    gantt.parse(tasks);

    // 加入階段標示 (Markers)
    gantt.addMarker({
      start_date: new Date(2026,2,20), // 3/20
      text: "Discovery",
      css: "phase_marker"
    });
    gantt.addMarker({
      start_date: new Date(2026,2,27), // 3/27
      text: "Explore",
      css: "phase_marker"
    });
    gantt.addMarker({
      start_date: new Date(2026,3,3), // 4/03
      text: "Build",
      css: "phase_marker"
    });
    gantt.addMarker({
      start_date: new Date(2026,3,10), // 4/10
      text: "Test & Iterate",
      css: "phase_marker"
    });
    gantt.addMarker({
      start_date: new Date(2026,3,24), // 4/24
      text: "Done!",
      css: "phase_marker"
    });
  </script>
</body>
</html>